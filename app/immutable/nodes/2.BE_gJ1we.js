import{s as De,d as He,e as ae,n as Pe,r as Ae,o as Ve}from"../chunks/scheduler.urFzR-R0.js";import{S as qe,i as Le,e as f,s as N,b as U,c as d,d as C,g as _,h as k,f as B,m as F,n as l,o as X,j as Re,k as e,p as P,l as Y,q as je}from"../chunks/index.DkE-deYj.js";function Ne(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function ke(t,s,a){const m=t.slice();return m[16]=s[a],m}function Ue(t){let s,a=t[16]+"",m,v=t[1]===t[16].toString()?"":" - "+localStorage.getItem(t[16].toString()),n,c,h;return{c(){s=f("option"),m=U(a),n=U(v),this.h()},l(u){s=d(u,"OPTION",{});var i=C(s);m=B(i,a),n=B(i,v),i.forEach(_),this.h()},h(){s.__value=c=t[16],X(s,s.__value),s.selected=h=t[1]===t[16].toString()},m(u,i){Re(u,s,i),e(s,m),e(s,n)},p(u,i){i&1&&a!==(a=u[16]+"")&&Y(m,a),i&3&&v!==(v=u[1]===u[16].toString()?"":" - "+localStorage.getItem(u[16].toString()))&&Y(n,v),i&1&&c!==(c=u[16])&&(s.__value=c,X(s,s.__value)),i&3&&h!==(h=u[1]===u[16].toString())&&(s.selected=h)},d(u){u&&_(s)}}}function ze(t){let s,a,m,v,n,c,h,u,i,E,Z="New...",I,M,q,L=t[3]?"Connected":"Disconnected",j,W,b,S,T,w,Ce="Reload Feed",re,R,Se="Reconnect Server",ie,y,ce,G=t[4]?"is":"",x,ue,$,fe,O,de,K=t[4]?"":"is",ee,he,te,ge,D,Te="Reset Web Client",ve,V,H,we="Reboot",me,A,Ee="Shutdown",pe,Ie,z=Ne(Array.from({length:t[0]},Be)),g=[];for(let r=0;r<z.length;r+=1)g[r]=Ue(ke(t,z,r));return{c(){s=f("div"),a=f("iframe"),v=N(),n=f("div"),c=f("div"),h=f("span"),u=U(`Client
        `),i=f("select"),E=f("option"),E.textContent=Z,I=f("optgroup");for(let r=0;r<g.length;r+=1)g[r].c();M=N(),q=f("b"),j=U(L),W=N(),b=f("input"),S=N(),T=f("div"),w=f("button"),w.textContent=Ce,re=N(),R=f("button"),R.textContent=Se,ie=N(),y=f("button"),ce=U("Camera "),x=U(G),ue=U(" On"),fe=N(),O=f("button"),de=U("Camera "),ee=U(K),he=U(" Off"),ge=N(),D=f("button"),D.textContent=Te,ve=N(),V=f("div"),H=f("button"),H.textContent=we,me=N(),A=f("button"),A.textContent=Ee,this.h()},l(r){s=d(r,"DIV",{id:!0,class:!0});var p=C(s);a=d(p,"IFRAME",{id:!0,title:!0,src:!0,frameborder:!0,class:!0}),C(a).forEach(_),v=k(p),n=d(p,"DIV",{id:!0,class:!0});var o=C(n);c=d(o,"DIV",{class:!0});var J=C(c);h=d(J,"SPAN",{id:!0,class:!0});var Q=C(h);u=B(Q,`Client
        `),i=d(Q,"SELECT",{class:!0});var _e=C(i);E=d(_e,"OPTION",{"data-svelte-h":!0}),F(E)!=="svelte-njwa56"&&(E.textContent=Z),I=d(_e,"OPTGROUP",{label:!0});var ye=C(I);for(let be=0;be<g.length;be+=1)g[be].l(ye);ye.forEach(_),_e.forEach(_),M=k(Q),q=d(Q,"B",{});var Oe=C(q);j=B(Oe,L),Oe.forEach(_),Q.forEach(_),J.forEach(_),W=k(o),b=d(o,"INPUT",{type:!0,id:!0,placeholder:!0,class:!0}),S=k(o),T=d(o,"DIV",{class:!0});var le=C(T);w=d(le,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),F(w)!=="svelte-po3z75"&&(w.textContent=Ce),re=k(le),R=d(le,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),F(R)!=="svelte-2ou9e1"&&(R.textContent=Se),le.forEach(_),ie=k(o),y=d(o,"BUTTON",{id:!0,class:!0});var ne=C(y);ce=B(ne,"Camera "),x=B(ne,G),ue=B(ne," On"),ne.forEach(_),fe=k(o),O=d(o,"BUTTON",{id:!0,class:!0});var se=C(O);de=B(se,"Camera "),ee=B(se,K),he=B(se," Off"),se.forEach(_),ge=k(o),D=d(o,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),F(D)!=="svelte-1fpzr60"&&(D.textContent=Te),ve=k(o),V=d(o,"DIV",{class:!0});var oe=C(V);H=d(oe,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),F(H)!=="svelte-1pa9fq5"&&(H.textContent=we),me=k(oe),A=d(oe,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),F(A)!=="svelte-xs473m"&&(A.textContent=Ee),oe.forEach(_),o.forEach(_),p.forEach(_),this.h()},h(){l(a,"id","stream"),l(a,"title","Live Stream"),He(a.src,m="")||l(a,"src",m),l(a,"frameborder","0"),l(a,"class","svelte-gytrl1"),E.__value="",X(E,E.__value),l(I,"label","Existing Clients"),l(i,"class","svelte-gytrl1"),l(h,"id","client"),l(h,"class","svelte-gytrl1"),l(c,"class","hstack svelte-gytrl1"),l(b,"type","text"),l(b,"id","host"),l(b,"placeholder","Camera IP/Hostname"),l(b,"class","svelte-gytrl1"),l(w,"id","reload"),l(w,"class","svelte-gytrl1"),l(R,"id","reconnect"),l(R,"class","svelte-gytrl1"),l(T,"class","hstack svelte-gytrl1"),l(y,"id","on"),l(y,"class",$=ae(t[4]?"bg":"")+" svelte-gytrl1"),l(O,"id","off"),l(O,"class",te=ae(t[4]?"":"bg")+" svelte-gytrl1"),l(D,"id","reset"),l(D,"class","svelte-gytrl1"),l(H,"id","reboot"),l(H,"class","svelte-gytrl1"),l(A,"id","shutdown"),l(A,"class","svelte-gytrl1"),l(V,"class","hstack svelte-gytrl1"),l(n,"id","buttons"),l(n,"class","svelte-gytrl1"),l(s,"id","main"),l(s,"class","svelte-gytrl1")},m(r,p){Re(r,s,p),e(s,a),e(s,v),e(s,n),e(n,c),e(c,h),e(h,u),e(h,i),e(i,E),e(i,I);for(let o=0;o<g.length;o+=1)g[o]&&g[o].m(I,null);e(h,M),e(h,q),e(q,j),e(n,W),e(n,b),X(b,t[2]),e(n,S),e(n,T),e(T,w),e(T,re),e(T,R),e(n,ie),e(n,y),e(y,ce),e(y,x),e(y,ue),e(n,fe),e(n,O),e(O,de),e(O,ee),e(O,he),e(n,ge),e(n,D),e(n,ve),e(n,V),e(V,H),e(V,me),e(V,A),pe||(Ie=[P(i,"change",t[6]),P(i,"mousedown",t[13]),P(b,"input",t[14]),P(b,"keydown",t[7]),P(w,"click",t[8]),P(R,"click",t[5]),P(y,"click",t[9]),P(O,"click",t[10]),P(D,"click",Fe),P(H,"click",t[11]),P(A,"click",t[12])],pe=!0)},p(r,[p]){if(p&3){z=Ne(Array.from({length:r[0]},Be));let o;for(o=0;o<z.length;o+=1){const J=ke(r,z,o);g[o]?g[o].p(J,p):(g[o]=Ue(J),g[o].c(),g[o].m(I,null))}for(;o<g.length;o+=1)g[o].d(1);g.length=z.length}p&8&&L!==(L=r[3]?"Connected":"Disconnected")&&Y(j,L),p&4&&b.value!==r[2]&&X(b,r[2]),p&16&&G!==(G=r[4]?"is":"")&&Y(x,G),p&16&&$!==($=ae(r[4]?"bg":"")+" svelte-gytrl1")&&l(y,"class",$),p&16&&K!==(K=r[4]?"":"is")&&Y(ee,K),p&16&&te!==(te=ae(r[4]?"":"bg")+" svelte-gytrl1")&&l(O,"class",te)},i:Pe,o:Pe,d(r){r&&_(s),je(g,r),pe=!1,Ae(Ie)}}}function Fe(){confirm("Reset? This will remove all clients.")&&(localStorage.clear(),location.href="?client=0")}const Be=(t,s)=>s;function Me(t,s,a){let m=0,v,n="",c,h=!1,u=!1;Ve(()=>{if(location.protocol==="https:"){alert(`HTTPS is not supported. The app will refresh to use HTTP.
If the error persists, please manually change the protocol in the address bar from HTTPS to HTTP.`),location.href="http://"+location.hostname+location.pathname+location.search;return}const S=new URLSearchParams(location.search);if(a(1,v=S.get("client")||""),v===""){if(localStorage.length===0){alert("Creating new client. Page will refresh to add new parameter."),location.href="?client=0";return}alert("Attempting last client. Page will refresh to add client parameter."),location.href="?client="+(localStorage.length-1);return}const T=localStorage.getItem(v);T===null?(a(2,n=prompt("Camera IP/Hostname")||""),n!==""&&localStorage.setItem(v,n)):a(2,n=T),a(0,m=localStorage.length),I(),i()});function i(){localStorage.setItem(v,n),c=new WebSocket("ws://"+n+":3000"),c.onopen=()=>{a(3,h=!0),c.send("status")},c.onmessage=S=>{if(S.data==="on")a(4,u=!0);else if(S.data==="off")a(4,u=!1);else return;I()},c.onclose=()=>{a(3,h=!1),alert("Connection closed.")}}function E(S){const w=S.target.value;w===""?location.href="?client="+m:location.href="?client="+w}function Z(S){S.key==="Enter"&&i()}function I(){document.getElementById("stream").src="http://"+n+":8889/cam"}function M(){c.send("on")}function q(){c.send("off")}function L(){confirm("Reboot Camera?")&&c.send("reboot")}function j(){confirm("Shutdown Camera?")&&c.send("shutdown")}const W=()=>{a(0,m=localStorage.length)};function b(){n=this.value,a(2,n)}return[m,v,n,h,u,i,E,Z,I,M,q,L,j,W,b]}class Ke extends qe{constructor(s){super(),Le(this,s,Me,ze,De,{})}}export{Ke as component};
