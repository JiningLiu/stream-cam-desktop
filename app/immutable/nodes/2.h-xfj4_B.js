import{s as tt,d as et,e as H,n as Z,r as st,o as lt}from"../chunks/scheduler.urFzR-R0.js";import{S as at,i as nt,e as m,s as y,b as x,c as p,d as E,g as O,h as w,f as A,m as q,n as e,j as ot,k as s,o as $,p as P,l as rt}from"../chunks/index.BMfImeCe.js";function it(o){let r,l,b,n,t,h,k,S,N,i,U,u,I="Reset",T,c,G="Reload Feed",D,v,J="Reconnect Server",F,_,L,B,M,C,V,R,j,g,K="Reboot System",z,Q;return{c(){r=m("div"),l=m("iframe"),n=y(),t=m("div"),h=m("span"),k=x("Client "),S=x(o[0]),N=y(),i=m("input"),U=y(),u=m("button"),u.textContent=I,T=y(),c=m("button"),c.textContent=G,D=y(),v=m("button"),v.textContent=J,F=y(),_=m("button"),L=x("Camera On"),M=y(),C=m("button"),V=x("Camera Off"),j=y(),g=m("button"),g.textContent=K,this.h()},l(f){r=p(f,"DIV",{id:!0,class:!0});var d=E(r);l=p(d,"IFRAME",{id:!0,title:!0,src:!0,frameborder:!0,class:!0}),E(l).forEach(O),n=w(d),t=p(d,"DIV",{id:!0,class:!0});var a=E(t);h=p(a,"SPAN",{});var W=E(h);k=A(W,"Client "),S=A(W,o[0]),W.forEach(O),N=w(a),i=p(a,"INPUT",{type:!0,id:!0,placeholder:!0,class:!0}),U=w(a),u=p(a,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),q(u)!=="svelte-1ambk2l"&&(u.textContent=I),T=w(a),c=p(a,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),q(c)!=="svelte-po3z75"&&(c.textContent=G),D=w(a),v=p(a,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),q(v)!=="svelte-2ou9e1"&&(v.textContent=J),F=w(a),_=p(a,"BUTTON",{id:!0,class:!0});var X=E(_);L=A(X,"Camera On"),X.forEach(O),M=w(a),C=p(a,"BUTTON",{id:!0,class:!0});var Y=E(C);V=A(Y,"Camera Off"),Y.forEach(O),j=w(a),g=p(a,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),q(g)!=="svelte-foxova"&&(g.textContent=K),a.forEach(O),d.forEach(O),this.h()},h(){e(l,"id","stream"),e(l,"title","Live Stream"),et(l.src,b="")||e(l,"src",b),e(l,"frameborder","0"),e(l,"class","svelte-ybr486"),e(i,"type","text"),e(i,"id","host"),e(i,"placeholder","Camera IP/Hostname"),e(i,"class","svelte-ybr486"),e(u,"id","reset"),e(u,"class","svelte-ybr486"),e(c,"id","reload"),e(c,"class","svelte-ybr486"),e(v,"id","reconnect"),e(v,"class","svelte-ybr486"),e(_,"id","on"),e(_,"class",B=H(o[2]?"bg":"")+" svelte-ybr486"),e(C,"id","off"),e(C,"class",R=H(o[2]?"":"bg")+" svelte-ybr486"),e(g,"id","reboot"),e(g,"class","svelte-ybr486"),e(t,"id","buttons"),e(t,"class","svelte-ybr486"),e(r,"id","main"),e(r,"class","svelte-ybr486")},m(f,d){ot(f,r,d),s(r,l),s(r,n),s(r,t),s(t,h),s(h,k),s(h,S),s(t,N),s(t,i),$(i,o[1]),s(t,U),s(t,u),s(t,T),s(t,c),s(t,D),s(t,v),s(t,F),s(t,_),s(_,L),s(t,M),s(t,C),s(C,V),s(t,j),s(t,g),z||(Q=[P(i,"input",o[8]),P(u,"click",ct),P(c,"click",o[4]),P(v,"click",o[3]),P(_,"click",o[5]),P(C,"click",o[6]),P(g,"click",o[7])],z=!0)},p(f,[d]){d&1&&rt(S,f[0]),d&2&&i.value!==f[1]&&$(i,f[1]),d&4&&B!==(B=H(f[2]?"bg":"")+" svelte-ybr486")&&e(_,"class",B),d&4&&R!==(R=H(f[2]?"":"bg")+" svelte-ybr486")&&e(C,"class",R)},i:Z,o:Z,d(f){f&&O(r),z=!1,st(Q)}}}function ct(){confirm("Reset? This will remove all clients.")&&(localStorage.clear(),location.href="?client=0")}function ut(o,r,l){let b,n="",t,h=!1;lt(()=>{location.protocol==="https:"&&(alert("HTTPS is not supported. The app will refresh to use HTTP."),location.href=location.href.replace("https","http"));const I=new URLSearchParams(location.search),T=window.localStorage;if(l(0,b=I.get("client")||""),b===""){if(T.length===0){alert("Creating new client. Page will refresh to add new parameter."),location.href="?client=0";return}alert("Attempting last client. Page will refresh to add client parameter."),location.href="?client="+(T.length-1);return}const c=T.getItem(b);c===null?(l(1,n=prompt("Camera IP/Hostname")||""),n!==""&&T.setItem(b,n)):l(1,n=c),S(),k()});function k(){localStorage.setItem(b,n),t=new WebSocket("ws://"+n+":3000"),t.onopen=()=>{t.send("status")},t.onmessage=I=>{I.data==="on"?l(2,h=!0):I.data==="off"&&l(2,h=!1)},t.onclose=()=>{alert("Connection closed.")}}function S(){document.getElementById("stream").src="http://"+n+":8889/cam"}function N(){t.send("on")}function i(){t.send("off")}function U(){t.send("reboot")}function u(){n=this.value,l(1,n)}return[b,n,h,k,S,N,i,U,u]}class mt extends at{constructor(r){super(),nt(this,r,ut,it,tt,{})}}export{mt as component};
