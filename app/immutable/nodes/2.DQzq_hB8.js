import{s as gt,d as bt,e as $,n as vt,r as Ct,o as Tt}from"../chunks/scheduler.urFzR-R0.js";import{S as wt,i as St,e as f,s as I,b as _,c as p,d as R,g as P,h as E,f as g,m as j,n as t,j as kt,k as e,o as _t,p as O,l as tt}from"../chunks/index.BMfImeCe.js";function It(n){let h,l,b,r,s,o,H,N,A,C=n[2]?"Connected":"Disconnected",y,z,F,i,L,a,D="Reset Web Client",V,U,T,dt="Reload Feed",et,w,ft="Reconnect Server",st,m,lt,M=n[3]?"is":"",K,nt,G,at,v,ot,W=n[3]?"":"is",J,rt,Q,it,B,S,pt="Reboot",ct,k,ht="Shutdown",ut,mt;return{c(){h=f("div"),l=f("iframe"),r=I(),s=f("div"),o=f("span"),H=_("Client "),N=_(n[0]),A=_(" ("),y=_(C),z=_(")"),F=I(),i=f("input"),L=I(),a=f("button"),a.textContent=D,V=I(),U=f("div"),T=f("button"),T.textContent=dt,et=I(),w=f("button"),w.textContent=ft,st=I(),m=f("button"),lt=_("Camera "),K=_(M),nt=_(" On"),at=I(),v=f("button"),ot=_("Camera "),J=_(W),rt=_(" Off"),it=I(),B=f("div"),S=f("button"),S.textContent=pt,ct=I(),k=f("button"),k.textContent=ht,this.h()},l(c){h=p(c,"DIV",{id:!0,class:!0});var u=R(h);l=p(u,"IFRAME",{id:!0,title:!0,src:!0,frameborder:!0,class:!0}),R(l).forEach(P),r=E(u),s=p(u,"DIV",{id:!0,class:!0});var d=R(s);o=p(d,"SPAN",{id:!0,class:!0});var q=R(o);H=g(q,"Client "),N=g(q,n[0]),A=g(q," ("),y=g(q,C),z=g(q,")"),q.forEach(P),F=E(d),i=p(d,"INPUT",{type:!0,id:!0,placeholder:!0,class:!0}),L=E(d),a=p(d,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),j(a)!=="svelte-1fpzr60"&&(a.textContent=D),V=E(d),U=p(d,"DIV",{class:!0});var X=R(U);T=p(X,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),j(T)!=="svelte-po3z75"&&(T.textContent=dt),et=E(X),w=p(X,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),j(w)!=="svelte-2ou9e1"&&(w.textContent=ft),X.forEach(P),st=E(d),m=p(d,"BUTTON",{id:!0,class:!0});var Y=R(m);lt=g(Y,"Camera "),K=g(Y,M),nt=g(Y," On"),Y.forEach(P),at=E(d),v=p(d,"BUTTON",{id:!0,class:!0});var Z=R(v);ot=g(Z,"Camera "),J=g(Z,W),rt=g(Z," Off"),Z.forEach(P),it=E(d),B=p(d,"DIV",{class:!0});var x=R(B);S=p(x,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),j(S)!=="svelte-1pa9fq5"&&(S.textContent=pt),ct=E(x),k=p(x,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),j(k)!=="svelte-xs473m"&&(k.textContent=ht),x.forEach(P),d.forEach(P),u.forEach(P),this.h()},h(){t(l,"id","stream"),t(l,"title","Live Stream"),bt(l.src,b="")||t(l,"src",b),t(l,"frameborder","0"),t(l,"class","svelte-1t740pg"),t(o,"id","client"),t(o,"class","svelte-1t740pg"),t(i,"type","text"),t(i,"id","host"),t(i,"placeholder","Camera IP/Hostname"),t(i,"class","svelte-1t740pg"),t(a,"id","reset"),t(a,"class","svelte-1t740pg"),t(T,"id","reload"),t(T,"class","svelte-1t740pg"),t(w,"id","reconnect"),t(w,"class","svelte-1t740pg"),t(U,"class","hstack svelte-1t740pg"),t(m,"id","on"),t(m,"class",G=$(n[3]?"bg":"")+" svelte-1t740pg"),t(v,"id","off"),t(v,"class",Q=$(n[3]?"":"bg")+" svelte-1t740pg"),t(S,"id","reboot"),t(S,"class","svelte-1t740pg"),t(k,"id","shutdown"),t(k,"class","svelte-1t740pg"),t(B,"class","hstack svelte-1t740pg"),t(s,"id","buttons"),t(s,"class","svelte-1t740pg"),t(h,"id","main"),t(h,"class","svelte-1t740pg")},m(c,u){kt(c,h,u),e(h,l),e(h,r),e(h,s),e(s,o),e(o,H),e(o,N),e(o,A),e(o,y),e(o,z),e(s,F),e(s,i),_t(i,n[1]),e(s,L),e(s,a),e(s,V),e(s,U),e(U,T),e(U,et),e(U,w),e(s,st),e(s,m),e(m,lt),e(m,K),e(m,nt),e(s,at),e(s,v),e(v,ot),e(v,J),e(v,rt),e(s,it),e(s,B),e(B,S),e(B,ct),e(B,k),ut||(mt=[O(i,"input",n[11]),O(i,"keydown",n[5]),O(a,"click",Pt),O(T,"click",n[6]),O(w,"click",n[4]),O(m,"click",n[7]),O(v,"click",n[8]),O(S,"click",n[9]),O(k,"click",n[10])],ut=!0)},p(c,[u]){u&1&&tt(N,c[0]),u&4&&C!==(C=c[2]?"Connected":"Disconnected")&&tt(y,C),u&2&&i.value!==c[1]&&_t(i,c[1]),u&8&&M!==(M=c[3]?"is":"")&&tt(K,M),u&8&&G!==(G=$(c[3]?"bg":"")+" svelte-1t740pg")&&t(m,"class",G),u&8&&W!==(W=c[3]?"":"is")&&tt(J,W),u&8&&Q!==(Q=$(c[3]?"":"bg")+" svelte-1t740pg")&&t(v,"class",Q)},i:vt,o:vt,d(c){c&&P(h),ut=!1,Ct(mt)}}}function Pt(){confirm("Reset? This will remove all clients.")&&(localStorage.clear(),location.href="?client=0")}function Et(n,h,l){let b,r="",s,o=!1,H=!1;Tt(()=>{location.protocol==="https:"&&(alert(`HTTPS is not supported. The app will refresh to use HTTP.
If the error persists, please manually change the protocol in the address bar from HTTPS to HTTP.`),location.href=location.href.replace("https","http"));const a=new URLSearchParams(location.search),D=window.localStorage;if(l(0,b=a.get("client")||""),b===""){if(D.length===0){alert("Creating new client. Page will refresh to add new parameter."),location.href="?client=0";return}alert("Attempting last client. Page will refresh to add client parameter."),location.href="?client="+(D.length-1);return}const V=D.getItem(b);V===null?(l(1,r=prompt("Camera IP/Hostname")||""),r!==""&&D.setItem(b,r)):l(1,r=V),C(),N()});function N(){localStorage.setItem(b,r),s=new WebSocket("ws://"+r+":3000"),s.onopen=()=>{l(2,o=!0),s.send("status")},s.onmessage=a=>{if(a.data==="on")l(3,H=!0);else if(a.data==="off")l(3,H=!1);else return;C()},s.onclose=()=>{l(2,o=!1),alert("Connection closed.")}}function A(a){a.key==="Enter"&&N()}function C(){document.getElementById("stream").src="http://"+r+":8889/cam"}function y(){s.send("on")}function z(){s.send("off")}function F(){confirm("Reboot Camera?")&&s.send("reboot")}function i(){confirm("Shutdown Camera?")&&s.send("shutdown")}function L(){r=this.value,l(1,r)}return[b,r,o,H,N,A,C,y,z,F,i,L]}class Ut extends wt{constructor(h){super(),St(this,h,Et,It,gt,{})}}export{Ut as component};
