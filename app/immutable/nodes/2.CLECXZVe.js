import{s as Y,d as Z,e as B,n as Q,r as $,o as tt}from"../chunks/scheduler.urFzR-R0.js";import{S as et,i as st,e as f,s as x,b as R,c as p,d as O,g as w,h as S,f as y,m as j,n as e,j as at,k as s,o as X,p as E,l as lt}from"../chunks/index.BMfImeCe.js";function nt(o){let r,a,h,l,t,v,T,q,P,i,k,u,I="Reload Feed",C,c,z="Reconnect Server",A,_,H,N,D,b,F,U,L,g,W="Reboot System",M,G;return{c(){r=f("div"),a=f("iframe"),l=x(),t=f("div"),v=f("span"),T=R("Client "),q=R(o[0]),P=x(),i=f("input"),k=x(),u=f("button"),u.textContent=I,C=x(),c=f("button"),c.textContent=z,A=x(),_=f("button"),H=R("Camera On"),D=x(),b=f("button"),F=R("Camera Off"),L=x(),g=f("button"),g.textContent=W,this.h()},l(d){r=p(d,"DIV",{id:!0,class:!0});var m=O(r);a=p(m,"IFRAME",{id:!0,title:!0,src:!0,frameborder:!0,class:!0}),O(a).forEach(w),l=S(m),t=p(m,"DIV",{id:!0,class:!0});var n=O(t);v=p(n,"SPAN",{});var V=O(v);T=y(V,"Client "),q=y(V,o[0]),V.forEach(w),P=S(n),i=p(n,"INPUT",{type:!0,id:!0,placeholder:!0,class:!0}),k=S(n),u=p(n,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),j(u)!=="svelte-po3z75"&&(u.textContent=I),C=S(n),c=p(n,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),j(c)!=="svelte-2ou9e1"&&(c.textContent=z),A=S(n),_=p(n,"BUTTON",{id:!0,class:!0});var J=O(_);H=y(J,"Camera On"),J.forEach(w),D=S(n),b=p(n,"BUTTON",{id:!0,class:!0});var K=O(b);F=y(K,"Camera Off"),K.forEach(w),L=S(n),g=p(n,"BUTTON",{id:!0,class:!0,"data-svelte-h":!0}),j(g)!=="svelte-foxova"&&(g.textContent=W),n.forEach(w),m.forEach(w),this.h()},h(){e(a,"id","stream"),e(a,"title","Live Stream"),Z(a.src,h="")||e(a,"src",h),e(a,"frameborder","0"),e(a,"class","svelte-xm6iqt"),e(i,"type","text"),e(i,"id","host"),e(i,"placeholder","Camera IP/Hostname"),e(i,"class","svelte-xm6iqt"),e(u,"id","reload"),e(u,"class","svelte-xm6iqt"),e(c,"id","reconnect"),e(c,"class","svelte-xm6iqt"),e(_,"id","on"),e(_,"class",N=B(o[2]?"bg":"")+" svelte-xm6iqt"),e(b,"id","off"),e(b,"class",U=B(o[2]?"":"bg")+" svelte-xm6iqt"),e(g,"id","reboot"),e(g,"class","svelte-xm6iqt"),e(t,"id","buttons"),e(t,"class","svelte-xm6iqt"),e(r,"id","main"),e(r,"class","svelte-xm6iqt")},m(d,m){at(d,r,m),s(r,a),s(r,l),s(r,t),s(t,v),s(v,T),s(v,q),s(t,P),s(t,i),X(i,o[1]),s(t,k),s(t,u),s(t,C),s(t,c),s(t,A),s(t,_),s(_,H),s(t,D),s(t,b),s(b,F),s(t,L),s(t,g),M||(G=[E(i,"input",o[8]),E(u,"click",o[4]),E(c,"click",o[3]),E(_,"click",o[5]),E(b,"click",o[6]),E(g,"click",o[7])],M=!0)},p(d,[m]){m&1&&lt(q,d[0]),m&2&&i.value!==d[1]&&X(i,d[1]),m&4&&N!==(N=B(d[2]?"bg":"")+" svelte-xm6iqt")&&e(_,"class",N),m&4&&U!==(U=B(d[2]?"":"bg")+" svelte-xm6iqt")&&e(b,"class",U)},i:Q,o:Q,d(d){d&&w(r),M=!1,$(G)}}}function ot(o,r,a){let h,l="localhost",t,v=!1;tt(()=>{const I=new URLSearchParams(location.search),C=window.localStorage;if(a(0,h=I.get("client")||""),h===""){if(C.length===0){alert("Creating new client. Page will refresh to add new parameter."),location.href="?client=0";return}alert("Attempting last client. Page will refresh to add client parameter."),location.href="?client="+(C.length-1);return}const c=C.getItem(h);c===null?(a(1,l=prompt("Camera IP/Hostname")||""),l!==""&&C.setItem(h,l)):a(1,l=c),q(),T()});function T(){localStorage.setItem(h,l),t=new WebSocket("ws://"+l+":3000"),t.onopen=()=>{t.send("status")},t.onmessage=I=>{a(2,v=I.data=="on")},t.onclose=()=>{alert("Connection closed.")}}function q(){document.getElementById("stream").src="http://"+l+":8889/cam"}function P(){t.send("on")}function i(){t.send("off")}function k(){t.send("reboot")}function u(){l=this.value,a(1,l)}return[h,l,v,T,q,P,i,k,u]}class ct extends et{constructor(r){super(),st(this,r,ot,nt,Y,{})}}export{ct as component};
